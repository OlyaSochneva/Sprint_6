
## QA Sprint 6

#### Тесты для Яндекс.Самокат

Содержимое проекта:

**pages** - папка со страницами по мод. РОМ

**tests** - папка с тестами

**locators** - папка с локаторами

**conftest.py** - файл с с фикстурами

**data.py** и **answers.py** - файлы с данными для тестов

**allure_results** - отчёты

**requirements.txt** - внешние зависимости

### Локаторы:
**main_page_locators.py** - л-ры главной страницы

**order_page_locators.ry** - л-ры страниц заказа «Для кого самокат» и «Про аренду»

**common_header_locators.py** - л-ры «шапки»

### Фикстуры:
**driver** - инициализирует драйвер с разрешением 1920х1080

**main_page(driver)** - возвращает объект класса MainPage

**order_page(driver)** - возвращает объект класса OrderPage

**common_header(driver)** - возвращает объект класса CommonHeader

## Тесты
### test_info (main page)

Проверка: при нажатии на вопрос появляется правильный текст ответа

Фикстура: main_page

Параметры: индекс вопроса и ответа, текст ответа

**Тест**:

- вызывает метод **click_on_question_and_get_answer_text**
- сверяет полученный текст с ожидаемым из файла **answers.py**
- проходит 8 раз для каждого вопроса
- использует общий локатор для вопросов и ответов, каждый проход исп. новый индекс

### test_create_order (order page)

Проверка: при прохождении всего позитивного сценария с корректными данными заказ успешно создаётся

Фикстуры: main_page, order_page

Параметры: кнопки «Заказать», набор данных пользователя

**Тест**:
- нажимает одну из кнопок «Заказать» (вызывает метод **click_on_order_button**)
- создаёт заказ (вызывает метод **create_order**)
- для заполнения полей берёт набор данных из файла **data.py**
- проходит дважды с разными точками входа (с разной кнопкой «Заказать»)
- к каждой кнопке привязан свой набор данных
- проверяет появление окна «Заказ оформлен»

### test_redirect_by_click_on_yandex_logo (common header)

Проверка: при нажатии на лого Яндекса в новом окне откроется главная Дзена

Фикстура: common_header

**Тест**:

- вызывает метод **click_on_yandex_logo_and_switch_to_new_window**
- проверяет видимость элемента с главной Дзена


### test_return_to_main_page_by_click_on_scooter_logo (common header)

Проверка: при нажатии на лого Самоката произойдёт переход на главную страницу

Фикстура: common_header

**Тест**:

- нажимает кнопку «Заказать» (вызывает метод **click_on_order_button**, унаследованный от MainPage) 
- нажимает на лого Самоката (вызывает метод **return_to_main_page_by_click_on_logo**)
- проверяет видимость элемента с главной страницы

## Страницы
### base_page методы:

**init** - инициализирует драйвер

**find_element_with_wait** - ожидает появление и возвращает элемент

**scroll_to_element** - скролл до элемента

**get_text** - получает текст элемента

**press_enter** 

**fill_field** - (2 аргумента) заполняет поле переданным текстом

**click_element** - кликает на элемент

**click_and_wait_for** - (2 аргумента) кликает на один элемент и ждёт появления второго

**click_and_wait_for_close** - кликает и ждёт исчезновения элемента

**switch_to_new_window_by_click_on_element** - кликает на элемент и переходит на открывшееся новое окно

**create_locator** - (2 аргумента) получает «общий» локатор элементов одной группы и собирает специфичный локатор для конкретного элемента с переданным индексом через format

### main_page методы:

**click_on_question_and_get_answer_text** - скроллит к блоку с вопросами, кликает на вопрос и возвращает текст ответа

Аргументы: общий локатор вопросов, общий локатор ответов, индекс локатора

Базовые методы: scroll_to_element, click_element, create_locator, get_text

**click_on_order_button** - если получает локатор кнопки «Заказать» в хэдере, кликает и ждёт появления страницы «для кого самокат». Если получает локатор кнопки на странице, сначала скроллит до неё

Аргументы: локатор кнопки «Заказать» (одной из)

Базовые методы: click_and_wait_for, scroll_to_element

### order_page методы:

**create_order** - полное создание заказа

Аргументы: словарь с данными для заполнения, общий локатор полей, общий локатор станций, общий локатор списка «Срок аренды» 

Вызывает методы: who_orders_fill_fields_and_next и about_rent_fill_fields_and_order

**who_orders_fill_fields_and_next** - заполняет все поля на стр «для кого самокат» и кликает «Далее»

Аргументы: общий локатор полей ввода, локатор для выбора станции, словарь с данными

Вызывает методы: 
- fill_name_field
- fill_surname_field
- fill_address_field
- choose_the_station
- fill_phone_number_field
- click_and_wait_for_close (нажимает «Далее»)

Все методы для **текстовых полей**:

- принимают 2 аргумента - общий локатор полей и словарь с данными
- собирают специфичный локатор поля со своим индексом (присваивается прямо в методе)
- заполняют поле данными, полученными по ключу из словаря 

Базовые методы: create_locator, fill_field

Метод **choose_the_station**:

- принимает 3 аргумента - общий локатор полей, общий локатор станций и словарь с данными
- собирает специфичный локатор для поля
- собирает локатор станции, индекс берёт из словаря с данными по ключу
- кликает на станцию и ждёт закрытия списка станций

Базовые методы: create_locator, click_element, click_and_wait_for_close

**about_rent_fill_fields_and_order**
- Заполняет обязательные поля на стр «Про аренду»
- Нажимает кнопку «Заказать»
- Нажимает кнопку «Да» в окне подтверждения заказа

Аргументы: общий локатор полей ввода, локатор поля «Срок аренды» и общий локатор для выбора срока из списка, словарь с данными

Вызывает методы:

- fill_delivery_date 
- choose_rental_term
- click_element (нажимает «Заказать»)
- click_element (нажимает «Да» в окне подтверждения)

Метод **fill_delivery_date**:

- заполняет поле как другие методы для текстовых полей
- нажимает enter чтобы закрыть выпадающий календарь

Метод **choose_rental_term**:

- принимает 3 аргумента - локатор поля, общий локатор для пунктов выпадающего списка, словарь с данными
- собирает локатор для выбора из списка, индекс берёт из словаря с данными по ключу
- выбирает из списка и ждёт его закрытия

Базовые методы: create_locator, click_element, click_and_wait_for_close

### common_header методы:

**click_on_yandex_logo_and_switch_to_new_window** - кликает на лого Яндекса, переходит на стр Дзена и ждёт появления элемента на ней

Аргументы: локатор лого, локатор с главной Дзена

Базовые методы: switch_to_new_window_by_click_on_element, find_element_with_wait

**return_to_main_page_by_click_on_logo** - кликает на лого Самоката и ждёт появления элемента с главной стр

Аргументы: локатор лого, локатор с главной стр

Базовые методы: click_and_wait_for











